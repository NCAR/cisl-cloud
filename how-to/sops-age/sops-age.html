
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SOPS, Age, and helm-secrets &#8212; CISL Cloud Pilot</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-pythia-theme.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using the NCAR kubernetes (k8s) clusters" href="../K8s/k8s-intro.html" />
    <link rel="prev" title="GitHub Strategy" href="../github-strategy.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="132">
    <div class="container-fluid" id="shim"></div>
    <div class="container-fluid" id="banner"></div>
    <nav class="navbar navbar-dark navbar-expand-lg bg-dark fixed-top bd-navbar shadow" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/NSF-NCAR.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">

       
        
            
        
        <li class="nav-item">
            <a class="nav-link nav-internal" href="../../main.html">Cloud Docs</a>
        </li>    
    
    
    
        <div class="dropdown">
        
            
        
            <li class="nav-item">
                <button class="dropbtn">
                        Resources <i class="fa fa-chevron-down" style="color: #000000;"></i>
                </button>
            </li>
            <div class="dropdown-content">
                
                    <a class="dropdown-link" href="https://jupyter.k8s.ucar.edu/">
                        NCAR k8s JupyterHub
                    </a><br>
                
                    <a class="dropdown-link" href="https://jupyterhub.hpc.ucar.edu/">
                        NCAR HPC JupyterHub
                    </a><br>
                
                    <a class="dropdown-link" href="https://ncar-cisl.2i2c.cloud/hub/login">
                        2i2c AWS JupyterHub
                    </a><br>
                
                    <a class="dropdown-link" href="https://hub.k8s.ucar.edu/">
                        Harbor - Container Registry
                    </a><br>
                
                    <a class="dropdown-link" href="https://rancher.k8s.ucar.edu/">
                        Rancher
                    </a><br>
                
                    <a class="dropdown-link" href="https://ithelp.ucar.edu/servicedesk/customer/portal/2/create/17">
                        Request VM
                    </a><br>
                
                    <a class="dropdown-link" href="https://stratus-admin.ucar.edu:10443/asview">
                        Stratus
                    </a><br>
                
            </div>
        </div>
    
    
       
        
            
        
        <li class="nav-item">
            <a class="nav-link nav-internal" href="https://www2.cisl.ucar.edu/">CISL Home</a>
        </li>    
    
    
       
        
            
        
        <li class="nav-item">
            <a class="nav-link nav-internal" href="https://jira.ucar.edu/secure/CreateIssueDetails!init.jspa?pid=18470&issuetype=10905">Report issue</a>
        </li>    
    
    

</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    <div class="container-xl">
      <div class="row">
        
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../main.html">
   CISL Cloud Pilot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview/services.html">
   Work in Progress
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../agile.html">
   Interacting w/ Cloud Team
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../create-tickets.html">
     Create tickets
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Availability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../availability/services.html">
   Services
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../availability/architecture.html">
   Architecture
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Administer the CISL Cloud
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../jupyter-book/jb-intro.html">
   Documentation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter-book/create-jb.html">
     Getting started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter-book/add-jb.html">
     Add content
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../jupyter-book/k8s-hosting.html">
     Hosting on k8s
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../github-strategy.html">
   GitHub Strategy
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Encrypting Secrets
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../K8s/k8s-intro.html">
   Kubernetes (k8s)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/Hosting/cert-mgr.html">
     cert-manager
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/Hosting/ingress.html">
     Ingress Controller
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/Hosting/external-dns.html">
     ExternalDNS
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../k8sJH/customize/custom.html">
     JupyterHub
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../k8sJH/gpu/gpu-admin.html">
       Setup GPUs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../k8sJH/customize/customize-docker.html">
       Customize Singleuser Image
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../k8sJH/customize/setup-gh-act.html">
       GitHub Actions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../K8s/Rancher/rancher-intro.html">
     Rancher (K8s)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/Rancher/get-kubeconfig.html">
       Get a kubeconfig
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/Rancher/cluster-access.html">
       Accessing a k8s Cluster
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/Rancher/create-namespace.html">
       Create namespace
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/Rancher/permissions.html">
       Permissions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/harbor/install-harbor.html">
     Harbor
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../K8s/Hosting/web-hosting.html">
     Host web applications
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/Hosting/new-user-deployment.html">
       New User Deployment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/Hosting/web-helm.html">
       Helm &amp; Argo CD
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../K8s/argocd/argo-intro.html">
     Argo CD
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../K8s/argocd/argo-update.html">
       Update your Argo CD Application
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Use the CISL Cloud
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview/getting-started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../k8sJH/k8sJH-intro.html">
   K8s JupyterHub
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../k8sJH/access.html">
     Requesting Access
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../k8sJH/user-info.html">
     Initial Login
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../k8sJH/customize/env.html">
     Conda Environments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../k8sJH/base-conda.html">
     Base Conda Environments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../k8sJH/gpu/gpu-intro.html">
     GPUs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../k8sJH/customize/github.html">
     Utilizing GitHub
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../k8sJH/dask/dask-intro.html">
     Dask
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../k8sJH/dask/dask-local.html">
       Dask LocalCluster
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../k8sJH/dask/dask-gateway.html">
       Dask Gateway
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../k8sJH/dask/dask-jobqueue.html">
       Dask Jobqueue
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../data-access/intro.html">
   Data Access
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../data-access/glade.html">
     GLADE
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Stratus/stratus-intro.html">
     Object Storage
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Stratus/stratus-access.html">
       Access
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Stratus/jupyter-extension.html">
       Jupyter S3 Extension
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Stratus/stratus-cmd.html">
       Python Examples
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../data-access/rda.html">
     RDA
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../data-access/rda-local.html">
       RDA Local Access
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../data-access/rda-remote.html">
       RDA Remote Access
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../K8s/harbor/harbor-intro.html">
   Container Registry
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/harbor/push-pull.html">
     Push &amp; Pull Images
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/harbor/scanner.html">
     Vulnerability Scan
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../K8s/Hosting/web-intro.html">
   Hosting Web Applications
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/Hosting/containerize.html">
     Containerize Python app
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/Hosting/book-image.html">
     Containerize Jupyter Book
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../K8s/Hosting/deploy.html">
     Deploy your application
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../github-actions.html">
     GitHub Actions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../vm/vm-intro.html">
   Virtual Machines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://arc.ucar.edu/knowledge_base/70549913">
   HPC JupyterHub
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../2i2cJH/2i2cJH-intro.html">
   2i2c JupyterHub
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../2i2cJH/access.html">
     Requesting Access
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2i2cJH/user-info.html">
     User Information
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Support Agreements
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../slas/slas.html">
   SLA’s
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../slas/glade.html">
     GLADE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../slas/stratus.html">
     Stratus
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../slas/ncar-jh.html">
     NCAR JupyterHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://docs.2i2c.org/support/">
     2i2c JupyterHub
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contact Us
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../contact.html">
   Information
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  <p style="font-weight: 700;text-decoration: underline;color: red;">This site is currently in active development.</p>
Follow our <a href="https://jira.ucar.edu/secure/RapidBoard.jspa?rapidView=220&projectKey=CCPP">Kanban board</a><br>
Visit our <a href="https://github.com/NCAR/cisl-cloud">GitHub Repo</a><br>
<a href="https://github.com/NicholasCote/jupyterbook-cisl-theme">Copy this JupyterBook layout</a><hr>
<div>Powered by <a href="https://jupyterbook.org">Jupyter Book</a></div><br>
Theme by <a href="https://projectpythia.org/">Project Pythia</a>

</div>

</div>

        

        <main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main"><div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/how-to/sops-age/sops-age.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/NCAR/cisl-cloud"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/NCAR/cisl-cloud/issues/new?title=Issue%20on%20page%20%2Fhow-to/sops-age/sops-age.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> On this page
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#age-installation">
     Age installation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sops-installation">
     SOPS installation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#helm-secrets-installation">
     Helm-secrets installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting Started
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#age-keygen">
     age-keygen
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sops">
     SOPS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#helm-secrets">
     helm-secrets
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#age">
     age
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     SOPS
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sops-yaml-file">
       .sops.yaml file
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     helm-secrets
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
          <div id="main-content" class="row">
            <div class="col-12 col-md-9 pl-md-3 pr-md-0">
              
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="sops-age-and-helm-secrets">
<h1>SOPS, Age, and helm-secrets<a class="headerlink" href="#sops-age-and-helm-secrets" title="Permalink to this headline">¶</a></h1>
<p>We utilize <a class="reference external" href="https://github.com/getsops/sops">SOPS</a> and <a class="reference external" href="https://github.com/FiloSottile/age">age</a> to encrypt sensitive information in our Helm charts in order to include all content required for administrators to deploy our applications via GitHub.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="age-installation">
<h3>Age installation<a class="headerlink" href="#age-installation" title="Permalink to this headline">¶</a></h3>
<p>You can locate age installation instructions for your OS at this <a class="reference external" href="https://github.com/FiloSottile/age">link to the age github repository</a>.</p>
</div>
<div class="section" id="sops-installation">
<h3>SOPS installation<a class="headerlink" href="#sops-installation" title="Permalink to this headline">¶</a></h3>
<p>You can locate the current binaries and installation instruction at this <a class="reference external" href="https://github.com/getsops/sops#download">link to the SOPS github repository</a>.</p>
</div>
<div class="section" id="helm-secrets-installation">
<h3>Helm-secrets installation<a class="headerlink" href="#helm-secrets-installation" title="Permalink to this headline">¶</a></h3>
<p>You should reference this <a class="reference external" href="https://github.com/jkroepke/helm-secrets">link to the helm-secrets github repo</a> for installation instructions and to ensure you are getting the latest stable version.</p>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>First make sure you have your binaries installed correctly by checking their versions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age</span> <span class="o">-</span><span class="n">version</span>
<span class="n">age</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">version</span>
<span class="n">sops</span> <span class="o">-</span><span class="n">version</span>
<span class="n">helm</span> <span class="n">plugin</span> <span class="nb">list</span>
</pre></div>
</div>
<p>After validating that the applications are installed and working correctly you can proceed to the setup.</p>
<div class="section" id="age-keygen">
<h3>age-keygen<a class="headerlink" href="#age-keygen" title="Permalink to this headline">¶</a></h3>
<p>You need to generate your public and private key pair. <strong>The private key needs to be kept secret and never shared with anyone.</strong> The public key can be shared with anyone and they could use your public key to send you encrypted information. Reference the SOPS section below to see what default directories SOPS looks for the key. Otherwise export an environment variable of <code class="docutils literal notranslate"><span class="pre">SOPS_AGE_KEY_FILE</span></code> with your key location.</p>
<p>Setup the public and private key pair with:</p>
<p><code class="docutils literal notranslate"><span class="pre">age-keygen</span> <span class="pre">-o</span> <span class="pre">keys.txt</span></code></p>
<p>Your public key is printed out when you generate the key pair but it is also a commented entry inside your key file so it’s still available even if you don’t copy the output.</p>
<p>With the key file setup you can now encrypt and decrypt files. You can check the help syntax and start testing with encrypting different files. Reference the documentation on how to utilize age for encryption and decryption.</p>
</div>
<div class="section" id="sops">
<h3>SOPS<a class="headerlink" href="#sops" title="Permalink to this headline">¶</a></h3>
<p>When decrypting a file with the corresponding identity, sops will look for a text file name keys.txt located in a sops subdirectory of your user configuration directory.</p>
<p>On Linux, this would be <code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/sops/age/keys.txt</span></code>.
On macOS, this would be <code class="docutils literal notranslate"><span class="pre">$HOME/Library/Application</span> <span class="pre">Support/sops/age/keys.txt</span></code>.
On Windows, this would be <code class="docutils literal notranslate"><span class="pre">%AppData%\sops\age\keys.txt</span></code>.</p>
<p>You can specify the location of this file manually by setting the environment variable <code class="docutils literal notranslate"><span class="pre">SOPS_AGE_KEY_FILE</span></code>. Alternatively you can provide the the key(s) directly by setting the <code class="docutils literal notranslate"><span class="pre">SOPS_AGE_KEY</span></code> environment variable.</p>
</div>
<div class="section" id="helm-secrets">
<h3>helm-secrets<a class="headerlink" href="#helm-secrets" title="Permalink to this headline">¶</a></h3>
<p>With the prerequisites met, helm should be able to encrypt and decrypt the yaml and json files.</p>
<p>You can test with:</p>
<p><code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">secrets</span> <span class="pre">edit</span> <span class="pre">test.yaml</span></code></p>
<p>You should see a sample yaml file generate and you could modify this file and save it if needed.</p>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Here you can find a couple examples on how to use the binaries for encryption and decryption.</p>
<div class="section" id="age">
<h3>age<a class="headerlink" href="#age" title="Permalink to this headline">¶</a></h3>
<p>Encryption can be done with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age</span> <span class="o">-</span><span class="n">o</span> <span class="n">example</span><span class="o">.</span><span class="n">yaml</span><span class="o">.</span><span class="n">age</span> <span class="o">-</span><span class="n">r</span> 
<span class="n">age1ucetgj7k3whaqf9nulacsqarur6nrgzuyt59apeptu5cphd6ksdsqpy5he</span> <span class="n">example</span><span class="o">-</span><span class="n">enc</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>Decryption can be done by the recipient with:
<code class="docutils literal notranslate"><span class="pre">age</span> <span class="pre">-d</span> <span class="pre">-o</span> <span class="pre">example.yaml</span> <span class="pre">example-enc.yaml</span></code></p>
</div>
<div class="section" id="id1">
<h3>SOPS<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Encryption can be done with:
<code class="docutils literal notranslate"><span class="pre">sops</span> <span class="pre">--encrypt</span> <span class="pre">--age</span> <span class="pre">age1yt3tfqlfrwdwx0z0ynwplcr6qxcxfaqycuprpmy89nr83ltx74tqdpszlw</span> <span class="pre">example.yaml</span> <span class="pre">&gt;</span> <span class="pre">example.enc.yaml</span></code></p>
<p>Decryption can be done by the recipient with:
<code class="docutils literal notranslate"><span class="pre">sops</span> <span class="pre">--decrypt</span> <span class="pre">example.enc.yaml</span> <span class="pre">&gt;</span> <span class="pre">example.yaml</span></code></p>
<div class="section" id="sops-yaml-file">
<h4>.sops.yaml file<a class="headerlink" href="#sops-yaml-file" title="Permalink to this headline">¶</a></h4>
<p>The .sops.yaml file allows sops to properly encrypt files and data with a regex. This allows us to utilize sops to encrypt secrets in our helm value files and those files can be stored in github. The .sops.yaml file will looks something like this:</p>
<img src="https://ncar.github.io/cisl-cloud/_static/sops-yaml.png"><p>Please reference the SOPS documentation for additional details. This file allows us to use multiple encryption methods with SOPS like KMS services. PGP/GPG is available but it is being deprecated in favor of age.</p>
</div>
</div>
<div class="section" id="id2">
<h3>helm-secrets<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The helm-secrets plugin allows a user to encrypt,decrypt,install, and lint helm value files. The plugin also allows a user to edit encrypted helm files. You need to have the .sops.yaml file created for helm-secrets to operate on encrypted files.</p>
<p>Encryption can be done with:
<code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">secrets</span> <span class="pre">encrypt</span> <span class="pre">example.yaml</span> <span class="pre">&gt;</span> <span class="pre">example-enc.yaml</span></code>
Decryption can be done with:
<code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">secrets</span> <span class="pre">decrypt</span> <span class="pre">example-enc.yaml</span> <span class="pre">&gt;</span> <span class="pre">example.yaml</span></code>
Install a chart with:
<code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">secrets</span> <span class="pre">install</span> <span class="pre">&lt;deployment-name&gt;</span> <span class="pre">&lt;repo/chart&gt;</span> <span class="pre">-f</span> <span class="pre">example-enc.yaml</span></code></p>
<p>Helm-secrets is a wrapper script to helm so all of the helm installations options should be available like setting the namespace and other chart variables.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./how-to/sops-age"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../github-strategy.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">GitHub Strategy</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../K8s/k8s-intro.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using the NCAR kubernetes (k8s) clusters</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </div>
          </div>
        </main>

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

<footer class="footer">
  <div class="container-fluid m-0 p-0">
  
    <div class="footer-item">
    
    </div>
  
    <div class="footer-item">
    <style>
  @import url('https://fonts.googleapis.com/css?family=Poppins:400,600,700');
</style>
<div class="grid-x grid-padding-y footer-menu-tertiary">
  <div class="cell text-center custom-footer">
      <small>©  UCAR</small>
          <a href="https://www.ucar.edu/privacy-notice" class="custom-footer-link">Privacy</a>
          <a href="https://www.ucar.edu/cookie-other-tracking-technologies-notice" class="custom-footer-link">Cookies</a>
          <a href="https://www.ucar.edu/terms-of-use" class="custom-footer-link">Terms of Use</a>
          <a href="https://www.ucar.edu/notification-copyright-infringement-digital-millenium-copyright-act" class="custom-footer-link">Copyright Issues</a>
          <a href="https://nsf.gov" class="custom-footer-link">Sponsored by NSF</a>
          <a href="https://ncar.ucar.edu" class="custom-footer-link">NCAR Home</a>
          <a href="https://www.ucar.edu" class="custom-footer-link">UCAR Home</a>
      </ul>
  </div>
</div>
    </div>
  
    <div class="footer-item">
      <div class="container-fluid footer-info">
    <div class="container-xl">
      <div class="d-flex justify-content-center">
        <p class="py-1 m-0">
            &copy;&nbsp;2023.
        
          By The CISL Cloud Pilot Team.
        
          Last updated on 17 January 2024.
        </p>
      </div>
    </div>
  </div>
    </div>
  
    <div class="footer-item">
    <div class="container-fluid footer-extra">
    <div class="container">
      <center>
        Theme by <a href="https://projectpythia.org">Project Pythia</a>. All code
        in Pythia Foundations is licensed under Apache 2.0. All other non-code
        content is licensed under
        <a href="https://creativecommons.org/licenses/by/4.0/">
          Creative Commons BY 4.0 (CC BY 4.0)</a
        >.
      </center>
      <br />
      <div class="row">
        <p class="m-0">
          <img
            src="../../_static/footer-logo-nsf.png"
            style="float: left; width: 60px; height: 60px; margin-right: 1rem"
          />
          This material is based upon work supported by the NSF National Center  for Atmospheric Research, a major facility sponsored by the U.S. National Science Foundation and managed by the University  Corporation for Atmospheric Research. Any opinions, findings and  conclusions or recommendations expressed in this material do not  necessarily reflect the views of the U.S. National Science Foundation. 
        </p>
      </div>
    </div>
  </div>
    </div>
  
  </div>
</footer>
  </body>
</html>