test_pod:
    enabled: true
    image: bats/bats:1.8.2
    pullPolicy: IfNotPresent
loki:
    enabled: true
    isDefault: true
    url: http://{{(include "loki.serviceName" .)}}:{{ .Values.loki.service.port }}
    auth_enabled: false
    commonConfig:
        path_prefix: /var/loki
        replication_factor: 1
    compactor:
        apply_retention_interval: 1h
        compaction_interval: 5m
        retention_delete_worker_count: 500
        retention_enabled: true
        shared_store: s3
        working_directory: /data/loki/boltdb-shipper-compactor
    backend:
        persistence:
            storageClass: ENC[AES256_GCM,data:3YUs3LbmYyMDWFfgyv2R,iv:pm9pRnHcYpg3T8BAcWsCsqO0Re+0g3mlTDOG844Meso=,tag:e32ek2wLFiRXXuE4fW+z1g==,type:str]
            enableStatefulSetAutoDeletePVC: false
            size: 10Gi
        extraArgs:
            - -config.expand-env=true
        extraEnv:
            - name: ENC[AES256_GCM,data:Dnja9jCZ6L1n/VUjlumSBHfC7clE,iv:0SamqrxUX95Dlzu+gB4JPpZYACV5uRbbLPe1vsT6r2w=,tag:O+EPI+eEEHwQUPxoKtDlGA==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:zfnJNQrvWhaWo4w=,iv:ASVE+kvu6bqy7yTZ3LeqoUjdy9czZ0jeRX6QLQC1UHw=,tag:Nx3qM1P4Pw5KzxJ84kvWjQ==,type:str]
                    key: AWS_ACCESS_KEY_ID
            - name: ENC[AES256_GCM,data:sb87ZVM48faUOCmymjhQul2xOyXyBeMirQ==,iv:6MaTd9gv7PLlJg0CCNTRzXXQpginRWggU90cRBg0YGc=,tag:7B3nzhTEsBk2JPAPfJs6jA==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:L1WVBQ1fLg40ETw=,iv:wUJOs8pvgyYi/j9A7tOZXZOtz6JMol3POXPVIu/QyQ8=,tag:QPmSl4Xp11yEVDcnR/+Svw==,type:str]
                    key: AWS_SECRET_ACCESS_KEY
    write:
        replicas: 2
        persistence:
            storageClass: ENC[AES256_GCM,data:l4JzKKt97QKYFGPrEJf2,iv:KENo2f6mGltKfqK1SeJoFjkRcul2t+LYCP1bYpFJG1o=,tag:fqFF/Sua+66EEjgJYGxt9w==,type:str]
            enableStatefulSetAutoDeletePVC: false
            size: 10Gi
        extraArgs:
            - -config.expand-env=true
        extraEnv:
            - name: ENC[AES256_GCM,data:JOJeuI94PYYLhXngsVzBq1GIvNZH,iv:XJQCV5u0C+pRgNZ/XLKQF2U3kNk14z76lTPpp1pCqZs=,tag:ybLuoSggmD4XZ1o5gsA6Uw==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:6IpNT0IXUq7gAMU=,iv:C1kIT3hGQi7BwjcpKM115k4BN6x5l95RXhaDGhR6jU0=,tag:JJz6fm1VpF/kyAG3fq5pdQ==,type:str]
                    key: AWS_ACCESS_KEY_ID
            - name: ENC[AES256_GCM,data:4S+F+7zCGWGSA2NSdCHPlCAAhr3ej14cWg==,iv:+oeRFGZv0EdLlpSWisHg9yxsd0CchZLLdu/db5o9cmY=,tag:y4cd6fgqekWcXLyJ5Th4Uw==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:mcQWRVi9rX0zSeQ=,iv:YDrk56IA+NekH8yyPElgaSAAI1b7TJdNcBgesFQ/FT8=,tag:eTlNQkWqjiejTZq+N6yAGg==,type:str]
                    key: AWS_SECRET_ACCESS_KEY
    read:
        replicas: 2
        persistence:
            storageClass: ENC[AES256_GCM,data:ociFAWNPDZ9hEA/VpGzt,iv:JVMkCOE6BwRuxWm6gjg8yT1NAlEG+EqTlfPkGPTWlv0=,tag:WiJf8cWF2Fs65EdU9F6JdQ==,type:str]
            enableStatefulSetAutoDeletePVC: false
            size: 10Gi
        extraArgs:
            - -config.expand-env=true
        extraEnv:
            - name: ENC[AES256_GCM,data:Sf27gTqd1DzlizJjiLPd0ZN59YqM,iv:gs9UYcPUB1Qo78AHXCUHekV62f5gq4Vq2IvT8eIxIWM=,tag:1Nozgf4N9zmhev3ZbsaVWQ==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:rI32kwv33M6Lkxk=,iv:jWrwmBO+biMUlMLVXdHqoANviWFF9LfPDiAuS24yXzc=,tag:yqCYzoLH/whPnIQfJtsgFQ==,type:str]
                    key: AWS_ACCESS_KEY_ID
            - name: ENC[AES256_GCM,data:7R7tPeg53vNlZN1jNcDpdDw5yWxN4SdIVg==,iv:4LkG94QIT5gf5R4BJMAAzvuXsMtdI6TubJK30nQSzXk=,tag:7+LHV7CvwO7lFwZHTCkcRg==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:haq8b3n5c3WkTQ8=,iv:VXXDEZJleMjYzdhX3VOieztY9NJUZiFbJn14Jcggnto=,tag:Xg6QxhT22ERa62UpM5M+mA==,type:str]
                    key: AWS_SECRET_ACCESS_KEY
    config:
        #server:
        #  http_listen_port: 3100
        schema_config:
            configs:
                - from: "2020-10-24"
                  store: boltdb-shipper
                  object_store: s3
                  schema: v11
                  index:
                    prefix: index_
                    period: 24h
        storage_config:
            boltdb_shipper:
                active_index_directory: /data/loki/index
                cache_location: /data/loki/boltdb-cache
                shared_store: s3
            aws:
                s3forcepathstyle: true
                s3: ENC[AES256_GCM,data:c1V3wTtgTX6P4lv/EdlLZ4uexzyDfraeyZCf5I3TsOtGAucvpkiWSCQhh4PQfSAJYX1HrNe+WiokqTJS7F7TJso1qbikNs55OZPpT26r1b/WZG26voN5Nk80dNmdJZUgCVZ786UQFDoWJVNsK9L9o9XL/Y9NibAgmw8BUr90zmSLt28tfCfU8stlCC+oih9SAMqNQXFjrYAC9LE6mdmudg==,iv:bs5MfxqgVBVHNC2fQMwbBd9LL4pe4QYFsW281ZS1k8c=,tag:FCQNHE1c62OtEJcN0GTquA==,type:str]
    readinessProbe:
        httpGet:
            path: /ready
            port: http-metrics
        initialDelaySeconds: 45
    livenessProbe:
        httpGet:
            path: /ready
            port: http-metrics
        initialDelaySeconds: 45
    datasource:
        jsonData: '{}'
        uid: ""
promtail:
    enabled: true
    initContainer:
        # -- Specifies whether the init container for setting inotify max user instances is to be enabled
        - name: ENC[AES256_GCM,data:Y2Ddbg==,iv:gHTiZKYUgRO9CkDbgdm25n0gN1aTpi5gUJAZjNdT4+g=,tag:np48DqV4++UVoJeK0g9YhA==,type:str]
          # -- Docker registry, image and tag for the init container image
          image: docker.io/busybox:1.33
          # -- Docker image pull policy for the init container image
          imagePullPolicy: IfNotPresent
          # -- The inotify max user instances to configure
          command:
            - sh
            - -c
            - sysctl -w fs.inotify.max_user_instances=512
          securityContext:
            privileged: true
    config:
        logLevel: info
        serverPort: 3101
        clients:
            - url: http://{{ .Release.Name }}:3100/loki/api/v1/push
fluent-bit:
    enabled: false
grafana:
    enabled: true
    grafana.ini:
        server:
            domain: ENC[AES256_GCM,data:r4+agZ2uVZ/wkA2D7rlMXkBgIHE=,iv:jmpIlsu5bub/qAqCRZCcSeWvkt2WUOgBMgpy2LmfDNg=,tag:1pW/7QTGTMLsk9c7deo0sA==,type:str]
        auth.ldap:
            enabled: true
            allow_sign_up: true
    logLevel: debug
    # Change this to a secure password
    adminPassword: ENC[AES256_GCM,data:8/iBIisrsfowpfoyfSQ=,iv:qhBjI5VI4Jzt4VXb7iCVbrHmrRqvEs+QPbTVIH/Ha58=,tag:SuQMxlBJitQ8Nbt9jwWRKg==,type:str]
    ldap:
        enabled: ENC[AES256_GCM,data:VxLI9Q==,iv:GSF6O1sB8NrxyrlNFMd9GYfCfMba4/1efiLMDm7h7jg=,tag:VIfoN0eSIiKJkkHMTuxZvQ==,type:bool]
        #ENC[AES256_GCM,data:tlqAAexgLhdXB9dd+/V0wZXS3ag4wMpICAn5nhSZ45mPlqnYuzw6w+SYTj7TeSt3Q7sYnjuFaZ/kqWbmY0RPW/HTxNHIpvUINP9QPMo6OnV3obUXrZEKzw==,iv:lpqoor3jUOoVx2/RxiNp067C2ROb02zuorJOmN3WgOg=,tag:Xuwd6thKHTOXgjTKZAi4SQ==,type:comment]
        #ENC[AES256_GCM,data:3lHmpxpH8VGpbJIa2ctA9LkwFPzajXdd/1OKoP0yXJoEkcf1,iv:4rgjtH8RgPyKY9nwUMMdZ+cKynYZ1jXw+Wams8SbIyM=,tag:tiwdEy7xGEbIje7dZC3tgw==,type:comment]
        #ENC[AES256_GCM,data:9/G1h4OEhDZtFwtR48jeOVTosAhcHW/OOpKt/Q==,iv:06mq8D1ONMnebuZR6CF+z5DWwth5GxyiHZ04DCIZOM4=,tag:P3YHRuFV5dYTDCMZVzEj8g==,type:comment]
        #ENC[AES256_GCM,data:Nau9xQdGWHnHfl9npU5fOlsGGXgBbsuV2V4hhuuHnrnu2hZ2dfNNQ9wyY072nYHdlTV4AMgYkPeJWr4zEJ25UTx6KOUp0sdYJuD8dAprx5fQ,iv:QpduAqjmIFqW1aQX5EqK4AnNctgcN6FKi1zDlkXKIjM=,tag:RT00s63ADFziRZHG8I9TEQ==,type:comment]
        #ENC[AES256_GCM,data:jWt5CGL44gMegA==,iv:iRWpPuT4+iHL9W4FHUouLUSmwAtZxjG0oAi/CAcTasI=,tag:oNG5Ca6UcyEPK24jWsbGIg==,type:comment]
        config: ENC[AES256_GCM,data:sNlayM/CofbTpiTguhNEPf6LzG3ofYak1Mpsfki0W6NpY/LBKJcQQ70RokPajSY6oB9dEyBNOzs/0G2y9LFJuJPt2wwlkjWpr7R370pgOWOLx4WDHR72BH6WeLxLIyLQ4S0C3A4QE5JAdMX47IWqyLUMXW756S9XktINTev9AADKe2Gxt8WiT9Rz/zxpY8zyyVdNjahDYtnc8uhEHOm3GAQ0kbcT4QDQiX//1yn4mVZJHuSpOjesC6tuQHkYExWHWdKD8/5sf8DT6O7DNz7GG8QUJNhU0QA7WowaZ3ROOjYzT1RPzt+q/vsjdsNuLJuyPzspHYIXdl+OTtFWAHLColJgBSrip34qvMIpMde6nBPNruFZ0qVlc7Lvc30P7IY2h1dEtdYiaCsq8CTcCsEC4LuI3MCqii2Souv9Ua+esHP9jg4ke7gTLt9/HplsCyYpx3Hbd3CPOt5PoTCQGciuwy3rAOrQMnAKYcFjKV8u8xmmegFRHdMZec+z6T/kGaPNMJvnAJHwiac+Wj7XDbvj1lUUgQ1llSFb5g1a559KYHYi0xERJ3w2+zf4IRiVhlULa6ieMUZ5RYLc+KZ/gTCuhMYzc/4DHS8ovFRRLhYis0PV2apSWYijSOxRg0cI59q9EQbk7OPqrY6IbhIFFb3TaHrNYHqtuZii2hdvzVc=,iv:bc6EZO8Ts6Ar5xFhtAF4Q9vWJTIn+BWfiijgILei42g=,tag:xcIlECRr8gI+zalAax74Yw==,type:str]
    ingress:
        enabled: true
        hosts:
            - ENC[AES256_GCM,data:ny19ZrwFvKDpZVTsrL/hY/jKhBI=,iv:9Xklr2B+zTEXjYkUZWqhyBuCa3xhukEAdLtUbA0CuMg=,tag:tppk6wghfgEZKmRXjc/rsw==,type:str]
        annotations:
            nginx.ingress.kubernetes.io/rewrite-target: /
            cert-manager.io/cluster-issuer: incommon
            kubernetes.io/ingress.class: nginx
            kubernetes.io/tls-acme: "true"
        tls:
            - secretName: ENC[AES256_GCM,data:amOQj98W9SNX3j+unPyigc1AtgluMGnZ,iv:RWtt7S14hP6YISuROT+5WspUnw5l4Y9Tlz3/79Lx30I=,tag:Rtldtc/62/A1pR+/y8y1gw==,type:str]
              hosts:
                - ENC[AES256_GCM,data:ekTOIK+J1C32sb3dUbVg/L3/Ozo=,iv:pu8fxeBA1Ci1Gze5YQxkSCnjXxFE9rstHAsbFm5NL0s=,tag:gvoJXUIgWs9AYi50+LKosw==,type:str]
    sidecar:
        datasources:
            label: ""
            labelValue: ""
            enabled: true
            maxLines: 1000
    image:
        tag: 8.3.5
prometheus:
    enabled: false
    isDefault: false
    url: http://{{ include "prometheus.fullname" .}}:{{ .Values.prometheus.server.service.servicePort }}{{ .Values.prometheus.server.prefixURL }}
    datasource:
        jsonData: '{}'
filebeat:
    enabled: false
    filebeatConfig:
        filebeat.yml: |
            # logging.level: debug
            filebeat.inputs:
            - type: container
              paths:
                - /var/log/containers/*.log
              processors:
              - add_kubernetes_metadata:
                  host: ${NODE_NAME}
                  matchers:
                  - logs_path:
                      logs_path: "/var/log/containers/"
            output.logstash:
              hosts: ["logstash-loki:5044"]
logstash:
    enabled: false
    image: grafana/logstash-output-loki
    imageTag: 1.0.1
    filters:
        main: |-
            filter {
              if [kubernetes] {
                mutate {
                  add_field => {
                    "container_name" => "%{[kubernetes][container][name]}"
                    "namespace" => "%{[kubernetes][namespace]}"
                    "pod" => "%{[kubernetes][pod][name]}"
                  }
                  replace => { "host" => "%{[kubernetes][node][name]}"}
                }
              }
              mutate {
                remove_field => ["tags"]
              }
            }
    outputs:
        main: |-
            output {
              loki {
                url => "http://loki:3100/loki/api/v1/push"
                #username => "test"
                #password => "test"
              }
              # stdout { codec => rubydebug }
            }
# proxy is currently only used by loki test pod
# Note: If http_proxy/https_proxy are set, then no_proxy should include the
# loki service name, so that tests are able to communicate with the loki
# service.
proxy:
    http_proxy: ""
    https_proxy: ""
    no_proxy: ""
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1ucetgj7k3whaqf9nulacsqarur6nrgzuyt59apeptu5cphd6ksdsqpy5he
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBUSllDRFhnZW9OSnhTdGxl
            djM2L3ZVTWdWN1FtNTZTdFNTWXNiTWNMTHdrCkY3dWlSQlJHR3lic3RuVlJKeitu
            U0pRUjQwSzA0V0xsbnVkZ09BUnE1ejAKLS0tIDNiWmFkRkJCN1FoQjZYSVFSQ2M2
            MW1lOXQvenFRd0lNMytkUjlEcnoya2cKUSb6HehSJFVNJ0w5u1nO7VttXzmoZra2
            eKslrSH50g3W3mlua2i+s53ZMIZvFZACQ/8iBiUauLhbicUh4M2sUw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1dnkv8vy8xkl5afwuwl55ycpquy2uk7ypc5ad87sfug2zffp6jgkqwwzglr
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBVZncyQlVoODh5eTVVU3dB
            MjdPZnE2UmFXVHZsRDhmSjNjR2xRcnhDdnc4CkltRWZyTzJVakVVa3M1b0l6Mmh5
            SkJkYlA5UUROUnc3TVlkNEppV0huYk0KLS0tIFlkeTAxTElJMjNhOEpOVndjUlo3
            U2dwTm9jdnhVQ2VrenJuSmRFdTAwcEkKYSLy5F+zKI9RSUiaLGDFarc/UO+11+UF
            12jDhaEQj9q7OgL4OvFXoJSZLFS/Iec8pbtZQUK2Vvtg+SyMMqb/Jg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1wt75fkqsa2ngrhtmr7ws2ve8v9h2463hryj4jk4k7m5khxmc9pgqgqag8x
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSByRUx6Nk5zRm5HY1Y3TXpj
            VE9rbHV6VTJMM2c1OWRyVUNMUXdUSno2OUZRCnpUV21xWG01dHRLTnAray94K2RT
            UHlPNitGZjNNM1pDZ2NjNGZRM1F5Y2MKLS0tIHBacnljNGx3eExtQWcwTWtPZTU4
            azlDNlFEbmUvMHJEWFFodkQ3cFlRdjAKg8otA4LkHGPDEOHVmJOYrzWWJiEidxl5
            O/fGfXwOt6qIOW3giQOPn9giSa63Ud3KS2uivAs4vlYNfersuTc1uw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1fqw4znyl0zjpw5ta7ll3auxpzg8dme578jgw43a0dtzjhwjn4qlstaez7c
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBHTDhxYmNtVThWeU1OcTJE
            OHdvSzhQd2JVTjZUUWswKzBnWkdpeVQveGtFCnZCcGh0V09pTHNqQUx0dXJvZ1BN
            UWRwUmc5akU1QUlzK0tqRnlKdDdPS3MKLS0tIFB3VmIyWURkVkZFWndLSXU4bDll
            MlkycTVUcTAwSTIxYUdMSTY5ZXZHemsKMZcNgZcZ0qKjrwRUODL/9a5NLLLDc4uA
            id5CexwfTcepDQF9Lknb+SdVg07rAdP+mVsVqiWstUyp40wC3srF5Q==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1m2ay7zlek6d4uctt09vsw5l8gpydjlvu9xemv8pqh97urdmhhyrsh9qe86
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBtMFVyTkpHTjBYTXIyc3l6
            RmtWSXR0b1JMdTlaZ0paMXFoZTNHYktCL1JVCk1keFAyR3YzZHMrL0JLU0pCcUtp
            eDhjd0I4RlhlWGxGTWx3YlBTYUU2Wk0KLS0tIHRCMVlvSmpRMklVTGVVSzBscWxR
            RFllaVJlb0JLQnFqM1dSNlpTRzNaMjQKSYzeUK9uEBWgJzjO8XUIa1rXb9x5xYhU
            KMR+ymkevdp2XwIaZhbberT6F2CR/oYsZfBfdBt0M9BhztdLLDUoSw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-07-09T15:50:00Z"
    mac: ENC[AES256_GCM,data:pplXejGcEaifDCkvstLmIsixzPVlPFmhO/m1Qik3do8XrJEvttc9bxiN8uil0OkrVRpW2RjdynI/3O9ynEr45kwIqVKUOVhMtSoMBXudMiI5ChsE+iHhqWg2rQBRj5GN7P4KEHyb/Q6K/UPQ3VvMhpeGRnItQC2DHaWS4Hk+Urg=,iv:lH0qZZo97vY7NltoxXQIR3/aFamRPN1mRrlHhDdgOMk=,tag:Ah19vXRqXtzIWeinbxxTVw==,type:str]
    pgp: []
    encrypted_regex: ^(s3|storageClass|secretName|name||existingSecret|hosts|adminPassword|domain|ldap)$
    version: 3.8.1
