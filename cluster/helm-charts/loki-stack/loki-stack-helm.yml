test_pod:
    enabled: true
    image: bats/bats:1.8.2
    pullPolicy: IfNotPresent
loki:
    enabled: true
    isDefault: true
    url: http://{{(include "loki.serviceName" .)}}:{{ .Values.loki.service.port }}
    auth_enabled: false
    commonConfig:
        path_prefix: /var/loki
        replication_factor: 1
    compactor:
        apply_retention_interval: 1h
        compaction_interval: 5m
        retention_delete_worker_count: 500
        retention_enabled: true
        shared_store: s3
        working_directory: /data/loki/boltdb-shipper-compactor
    backend:
        persistence:
            storageClass: ENC[AES256_GCM,data:x9N6k2gPWjObVNwsIc5I,iv:FMNjouqL0fSMfRdjChEpzrhT76q5hcY90Dn3bThY+w0=,tag:ov6v+pdaPStZlfMfUTBGAA==,type:str]
            enableStatefulSetAutoDeletePVC: false
            size: 10Gi
        extraArgs:
            - -config.expand-env=true
        extraEnv:
            - name: ENC[AES256_GCM,data:uMjMlTZJzrjN1XDy5V06KizrGsQe,iv:a0YcqZ85ZSwaTTpdq22jZZE/t70Xk0XlpqseByvCbNU=,tag:Bx8NJ6Mo/B2NwOrfGdMgcg==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:rXOAnRjnfSfVj08=,iv:hXuY/KLsCwQUubhApmiM2jy3sozNfZFn1kgVpcTnQHM=,tag:BKV3NSMVRAjLKmPZeXxq4w==,type:str]
                    key: AWS_ACCESS_KEY_ID
            - name: ENC[AES256_GCM,data:CaLH6ORcVjVf90y/Jz7LqtmXIaNN6EwDuw==,iv:QIiRKkusePl2crtNP+ZYIl5ZanX4mG+WN2I8JC8or0s=,tag:u9b5WpEXJqgO/Z6FRpsJIw==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:TCcMLNqX5/0JeqI=,iv:tqgehiFBbKVt1mcui2G7B/VJhfm4nZVcVnd3nb8CaVk=,tag:nEzoLA3Q8JE44WDj3t0pcw==,type:str]
                    key: AWS_SECRET_ACCESS_KEY
    write:
        replicas: 2
        persistence:
            storageClass: ENC[AES256_GCM,data:9bcAATaFs9kuaF+oYxSJ,iv:13Z4Xmx3jU1ie1iWyJ6EaAQl0M48o0h7JUk+unrw10s=,tag:A2BvPzDGHo7ZAydoCEOx1w==,type:str]
            enableStatefulSetAutoDeletePVC: false
            size: 10Gi
        extraArgs:
            - -config.expand-env=true
        extraEnv:
            - name: ENC[AES256_GCM,data:D5LGNPQll4rK4RaYzo6S6x2oncQS,iv:T300h5ZD4Ho+QVpHzY3DkFmG1BrEwoZQf8/U/PIvAHM=,tag:LKdOnr1GfKv3cT7Jf3JzlQ==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:Atxb3hw8CTjubJU=,iv:jsMWFRAwXK/X7aTWsd89cRTNWdErg4JvBbw1kVFlmv4=,tag:7hKi5iX5ZB8rthbOAfIGSg==,type:str]
                    key: AWS_ACCESS_KEY_ID
            - name: ENC[AES256_GCM,data:EvFr7gPPw5TySzO/SGqkqs70piAgXEQUNQ==,iv:KW95dR0DkKm8Botgx3puGE3dnUpoC1uK5iL9P552prM=,tag:PxUABfFOUJjY1oht1Ok3XA==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:mhgKaYjW/sSjAwo=,iv:MfLVAg4on+kzo8WsjerOV4FmDrcGN2itA1WzvBpYR5s=,tag:rSyn+LRhFsafnR9Z7CP7kw==,type:str]
                    key: AWS_SECRET_ACCESS_KEY
    read:
        replicas: 2
        persistence:
            storageClass: ENC[AES256_GCM,data:ySEOgWoC716mH8CbtJ8v,iv:VFMygjobujAi6XNI2h9L/amSSNB9LYekSFIVUikyea4=,tag:W2cfbeZClOXdfu3go2udJg==,type:str]
            enableStatefulSetAutoDeletePVC: false
            size: 10Gi
        extraArgs:
            - -config.expand-env=true
        extraEnv:
            - name: ENC[AES256_GCM,data:lQz/YLutjNpEyshYQjvAQRuUWlTF,iv:DoYoWdykqrc7d66+2JMQKUxBS1mWPNbQ26meLjvwjGc=,tag:qsT5KNdwirVQatlcIrY0MQ==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:ZXxWAalXsyBukIo=,iv:jo32NQnEKV0XKc6azt4rcYQ4z42XK4xh3YcsnV1IrU4=,tag:9Z76qyA4pMGjfCLuYIsi5A==,type:str]
                    key: AWS_ACCESS_KEY_ID
            - name: ENC[AES256_GCM,data:jdhDEg2YWHaUAZ3G89mqgAhU9CuPO/7nPg==,iv:3eKwX4U1GBdjEjS7KVyxGVyzjonGmX6Xm6cJDF0ptuM=,tag:JgJnciFHCtyT3WvRbQ3tVg==,type:str]
              valueFrom:
                secretKeyRef:
                    name: ENC[AES256_GCM,data:OYbYk+GFGKYja68=,iv:Gm+B11O8YHhH19LwS3QIzxcgttk2UR4lC2mRI2K9I3Y=,tag:i2McQCWQIsbxDDVy6PtzKQ==,type:str]
                    key: AWS_SECRET_ACCESS_KEY
    config:
        #server:
        #  http_listen_port: 3100
        schema_config:
            configs:
                - from: "2020-10-24"
                  store: boltdb-shipper
                  object_store: s3
                  schema: v11
                  index:
                    prefix: index_
                    period: 24h
        storage_config:
            boltdb_shipper:
                active_index_directory: /data/loki/index
                cache_location: /data/loki/boltdb-cache
                shared_store: s3
            aws:
                s3forcepathstyle: true
                s3: ENC[AES256_GCM,data:ZZcizaZjyyH8spPsm4/TmYF1oou3DkbhtEiEPXP5HSV500KG0bg78U0FeYjmvGgsBXYfQso1+owttCNo+R7xb+inU9CRcrVaptHcRvWmeE/C8BFW3ooNYZTYbVrbX7c+Rptn3+WzCcwlN37WRdlq/cnvY2ncfgEGjrwCnN5lUTY9ephkpxJJjR3U4/78BrZ3r6oEhft/zGvxtk+vTbC3tQ==,iv:3RI0cbZDwcQftufD1HGmSfF0PZZKR/s2YInq3iDAVk4=,tag:fuQ2PbHKbGtWUiSfigvROw==,type:str]
    readinessProbe:
        httpGet:
            path: /ready
            port: http-metrics
        initialDelaySeconds: 45
    livenessProbe:
        httpGet:
            path: /ready
            port: http-metrics
        initialDelaySeconds: 45
    datasource:
        jsonData: '{}'
        uid: ""
promtail:
    enabled: true
    initContainer:
        # -- Specifies whether the init container for setting inotify max user instances is to be enabled
        - name: ENC[AES256_GCM,data:/mwPJg==,iv:18LLZ/4AVkmiOsBc+g4zxHA/S12Rd14Mb0/XHAm7hvo=,tag:qySTkAK4NFDN6FoT77eVfg==,type:str]
          # -- Docker registry, image and tag for the init container image
          image: docker.io/busybox:1.33
          # -- Docker image pull policy for the init container image
          imagePullPolicy: IfNotPresent
          # -- The inotify max user instances to configure
          command:
            - sh
            - -c
            - sysctl -w fs.inotify.max_user_instances=512
          securityContext:
            privileged: true
    config:
        logLevel: info
        serverPort: 3101
        clients:
            - url: http://{{ .Release.Name }}:3100/loki/api/v1/push
fluent-bit:
    enabled: false
grafana:
    enabled: true
    logLevel: debug
    # Change this to a secure password
    adminPassword: ENC[AES256_GCM,data:Swdl2hpOhGTuJw==,iv:t/cY4xOO0UkzU6d8laGCF8PTv0BoEq7l3uIqmIHJsv4=,tag:EFeoyIGcm7vPkYM7JQP3FQ==,type:str]
    ldap:
        enabled: true
        existingSecret: ENC[AES256_GCM,data:tfomBRuoPJiPpfxA,iv:42XNc/1suGG+HXwQkz0ogd/tbvtlhAZFdlnyEaHOcFM=,tag:kO9od47Vc0CwF8WOQnFnXA==,type:str]
    ingress:
        enabled: true
        hosts:
            - ENC[AES256_GCM,data:Hr+VJf0Yv5hBtQif+XLOD5bafHc=,iv:eAUjLx/09I68PCsjKb1IR0kk3BTWrm8HutEemdGyy3o=,tag:00RGVwIiv/cOlrKDDRyueA==,type:str]
        annotations:
            nginx.ingress.kubernetes.io/rewrite-target: /
            cert-manager.io/cluster-issuer: incommon
            kubernetes.io/ingress.class: nginx
            kubernetes.io/tls-acme: "true"
        tls:
            - secretName: ENC[AES256_GCM,data:PfKF/HolBmuyNfL/c/0lP5AcLFhgUAOs,iv:5ZPxKhG84IXWtCP+8OMOtFI1zwZmzG9nsTU5lK/vCDA=,tag:jr20+hHc4wip/el+IuoXyA==,type:str]
              hosts:
                - ENC[AES256_GCM,data:IKtf2vvknCnayl2R0T7Oqq836LA=,iv:6Ruh1n0bfjvs0NpqqhzGMdY92nRvo2HQz+ccVq2B9IU=,tag:mv+nrWkc7pIF7WKeoci0pw==,type:str]
    sidecar:
        datasources:
            label: ""
            labelValue: ""
            enabled: true
            maxLines: 1000
    image:
        tag: 8.3.5
prometheus:
    enabled: false
    isDefault: false
    url: http://{{ include "prometheus.fullname" .}}:{{ .Values.prometheus.server.service.servicePort }}{{ .Values.prometheus.server.prefixURL }}
    datasource:
        jsonData: '{}'
filebeat:
    enabled: false
    filebeatConfig:
        filebeat.yml: |
            # logging.level: debug
            filebeat.inputs:
            - type: container
              paths:
                - /var/log/containers/*.log
              processors:
              - add_kubernetes_metadata:
                  host: ${NODE_NAME}
                  matchers:
                  - logs_path:
                      logs_path: "/var/log/containers/"
            output.logstash:
              hosts: ["logstash-loki:5044"]
logstash:
    enabled: false
    image: grafana/logstash-output-loki
    imageTag: 1.0.1
    filters:
        main: |-
            filter {
              if [kubernetes] {
                mutate {
                  add_field => {
                    "container_name" => "%{[kubernetes][container][name]}"
                    "namespace" => "%{[kubernetes][namespace]}"
                    "pod" => "%{[kubernetes][pod][name]}"
                  }
                  replace => { "host" => "%{[kubernetes][node][name]}"}
                }
              }
              mutate {
                remove_field => ["tags"]
              }
            }
    outputs:
        main: |-
            output {
              loki {
                url => "http://loki:3100/loki/api/v1/push"
                #username => "test"
                #password => "test"
              }
              # stdout { codec => rubydebug }
            }
# proxy is currently only used by loki test pod
# Note: If http_proxy/https_proxy are set, then no_proxy should include the
# loki service name, so that tests are able to communicate with the loki
# service.
proxy:
    http_proxy: ""
    https_proxy: ""
    no_proxy: ""
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1ucetgj7k3whaqf9nulacsqarur6nrgzuyt59apeptu5cphd6ksdsqpy5he
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBFT3VwMEsrRGUrY3ZqRkhu
            L3UxLzgyNzlSR0czK0ZXRmhNS3hvVXFLM3pjCjhzNS9xak54ZHcwUEU0dkdwYWx5
            SlRiOHBrZm1oZlRjU3ZndXhDbUl5ZkUKLS0tIEp4RW9jMmFCbUxZQ0NyWUc3N2hM
            elc2cEYzVng1Mkx0TVBQK2dwUEFRVGsKnBpiQ8Bow+Xd5kvOfIBErLLXlmulFBA5
            IO51N9ngel1c0EeJ6nWC+MdvnYG/ZV07Yzx9QieaQVVQ1oKmbcTwwA==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1dnkv8vy8xkl5afwuwl55ycpquy2uk7ypc5ad87sfug2zffp6jgkqwwzglr
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBlaUQzR1BQWjU0MzNsZ2VD
            bk1IY0RvZXN4dHRxWGZaTlM3Ly9HOGIzWlNNCnJIRUNjYmwrY3lvbXpVd3NCeEl1
            VXgwL1ZRWmRYM1I2bUtITnJVdDFxVG8KLS0tIG9vU1VsT0hWd3VPbjViYXVhaTEx
            dVp6ZWVsaFBMLzQzWm96Q1NjTW1kQ3MKqI6hr1K6i++2UDD0/TKYxxETR8so0W7C
            o/VaEqBpuJUji/GCjNm+yyn8fX7XUYJIjbReVvyyCEp8SZMCFVbA/A==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1wt75fkqsa2ngrhtmr7ws2ve8v9h2463hryj4jk4k7m5khxmc9pgqgqag8x
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBrOW5Zd1RORkkrT2FEdGdi
            OGRSbllrRzArZjJvM2ZRd0VjQlI4emFFVGo0ClY5OWdmV3YvZWFJN3FYaFF5TWhR
            L2Z6Zit5bXBYL1oxUG5aM0w4Zm4ya2sKLS0tIGVySkMxMmdxMXV4ZlJkSGU5eDlr
            TmFmbGdFR2srSGxYZTZMbjF3bjgvcHMK7x5ZzC95ikOhwIMmC3IJImSwJi4BBzoB
            mHSFQxDCjvQENbwQVUzBTJG7jY4X7rYjsHG8Ecuo7G3Si+E6u7onmw==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1fqw4znyl0zjpw5ta7ll3auxpzg8dme578jgw43a0dtzjhwjn4qlstaez7c
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA2L291VzZHS2hQYmgwY3Y2
            dUtjNVlrYndwaW1DaG5tbVZzSFN6MWpmSVVvCkFQSGxSTURBY09SeU90NUFieUFP
            QzV1bU1XUmpmbVI4SVJtQWM3YkxndU0KLS0tIEVEd1JDTjJNdTk4K01QbFh4Mkt6
            dkxQOVRHcUs5cWhUWnhxOE9qTi9ydlEKwFkTuJhBc/lB78BdE6UTvZMhvrM6RWWt
            0plSMtV8CEexg91Bm2VrqbIfjOwWm/yifszc7fUc2QoL8xLnXnqhRg==
            -----END AGE ENCRYPTED FILE-----
        - recipient: age1m2ay7zlek6d4uctt09vsw5l8gpydjlvu9xemv8pqh97urdmhhyrsh9qe86
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBqQlNnSlhHNjhLUmpsb0dI
            MlpQNCtqeE9MMW9uRHpQOEQ3cmU3QlFzeTNvCmxZZVNjUHI0THFrY1BmejNybnpJ
            ZXBrVFh0MkN0eitxaFVlaFlGakdqTHcKLS0tIHRSSjdyWXZmM0JkM3M2aDJKSVlT
            aThHcjFWdXJ0M3dQRzNDSWp5SmwwK1kK9lYxMN5/lQiPrqDscHedkGN5TgrI/YNR
            rzvKKT/rEAKJsuytXiea9Q7xTrHSoaz8WnUvB4HjquUQlZLprSm/YA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-04-09T20:03:37Z"
    mac: ENC[AES256_GCM,data:dJXfbq2+XyzPUYl3/4mUcN5bg7lS1odUoaO1ffhuRzoZm8Rr5SElONtXbjGuZpjxMEPXE58IRBbJCLQHrCQDwRgcDFaNyTb8g1Uzxrk+YeaGih4atrLKzKm5MQjy7zSejs366dRRlgqzZkjiXlwoOdrEiGhMlVQBsDeiUd65fXc=,iv:JZfVQGS2cxMsgFLBTU5OE1sXIvkYEOkC3y7w8qZQ1vM=,tag:xysG+9WjJCJ9FbNKqfeymw==,type:str]
    pgp: []
    encrypted_regex: ^(s3|storageClass|secretName|name||existingSecret|hosts|adminPassword)$
    version: 3.8.1
